# [John Hull教材笔记]期权定价入门[1]: 一阶Binomia模型 - 无套利定价

虽然我不是数学或者金融专业的, 但既然在这个领域工作了, 就开始系统性地学习一下.

这篇文章按我自己的理解整理了John C. Hull的《Options, Futures, and Other Derivatives》相应的章节, 有删减, 也有增加背景介绍, 细节以原文为主, 有问题欢迎指出. 

防杠精声明: 如果觉得文章有错漏麻烦指出具体错在哪, 或给出正确的答案解释, 或者相应的引用来源.


## 期权是什么?

期权是一种金融产品, 是一个和客户(比如对冲基金)的合约, 合约的内容规定在某个时刻或者这个时刻之前, 客户有权利选择是否以某个价钱买入期权对应的证券. 

拿股票举例, 某个股票本身是有价格并且随着时间变动, 我们衍生出对应的股票期权, 规定在某个时刻或者这个时刻之前, 客户有权利选择是否以某个价钱买入这个股票. 

我们把这个例子里的股票称为标的证券(underlying security). 

我们把对应的期权称为衍生证券/衍生品(derivatives). 

## 为什么要做期权定价?

假如一个股票当前价值是$20, 这时候某个对冲基金觉得股票3个月后会涨到$22. 但是他们买1个股票本身要花费$20的成本, 还要持有3个月才能赚$2(10%).

这时候投行可以创造出1个对应的期权并且卖给这个基金客户, 这个期权规定, 在三个月到期后, 不管股票当时价格是多少, 客户都有权利以$21买入一定数量的这个股票. 

再假设这个期权的价格是$0.5(真的随便假设的), 我们也不考虑无风险利率, 并且3个月到期时股票涨跌只有2种情况:

1. 股票涨到了$22, 客户行使权利, 以$21的价格买入股票, 那么客户赚了$1, 相对于假设的期权价赚了1/(1-0.5)=100%. 虽然赚的绝对数值不高($0.5<$2), 但是不需要花费$20成本买股票并且持有3个月. 

2. 股票跌到了$18, 客户行使权利, 以$21的价格买入股票, 那么客户亏了$3...但客户必然不行使权利, 那么亏了当初买的期权价$0.5, 也就是亏了100%. 亏了的绝对数值也不高($0.5<2%), 同样不需要花费$20成本买股票并且持有3个月.

对于这个对冲基金来说, 这个期权真的非常值得买, 但对于投行来说, 这个期权卖这个价合理吗? 

投行要考虑, 这个期权要卖多少钱, 才能在最倒霉的情况下不亏呢? 

客户也要考虑, 要花多少钱买入这个期权, 在最好的情况下赚最多, 在最倒霉的情况下, 合理地亏掉一些呢? 

这个问题也就是所谓的期权定价(options pricing). 

```
背景知识:
股票本身的价格是$20, 这是标的价格(Underlying price)
这种期权只能在到期日执行, 不能提前执行, 这种合约称之为欧式期权(European option)
因为投行卖出期权的合约是用户有权利买入股票(也可以不买), 这种合约我们称之为看涨期权(call option), 因为客户看涨才买嘛
这个合约规定的行使权利的价格是$21, 这也就是行权价(strike price)
```

## Binomial Tree定价

Binomial Tree是一个很常用的定价模型. 在这种模型下, 我们有一系列假设. 

首先我们假设股票价格是随机游走的(random walk). 从一个时间段的开头到结尾, 股票价格可能上行, 也可能下行, 但我们不去预测, 我们就假设它上行的概率和下行的概率. 

### 一阶Binomia模型 - 案例

我们再看这个案例, 取一个时间段3个月. 假设某个股票当前价格(underlying price)是$20. 

假设3个月后股票价格有2种可能, 股票可能涨到$22, 也可能跌到$18. 

注意这里没有给出涨跌概率, 只给出了涨跌可能的结果. 不管它是50%的概率涨还是90%的概率涨, 我们只把股价涨跌后的可能的结果拿来做期权定价, 实际上涨跌的概率已经包含在股价里面了(The probabilities of future up or down movements are already incoperated into the stock price).

1. 股票涨到了$22, 如果客户行使权利, 以$21的价格买入股票, 那么客户赚了$1, 这时候这个期权的价值就是$1

2. 股票跌到了$18, 客户必然不行使权利, 这时候这个期权的价值就是$0

![image](https://user-images.githubusercontent.com/5571030/206761957-1ab76bb4-23fb-4e95-84a0-ebbf8218d267.png)

这时候你作为投行, 你要决定这个期权最开始以多少价格出售, 你会怎么做呢?

### 一阶Binomia模型: 无套利定价(No-arbitrage pricing) 

我们做一个假设, 市场上没有套利的机会(arbitrage opportunities do not exist).

也就是说我们是在一个有效市场里的(efficient market), 其中市场上的价格就是产品真实的价值, 不会因为流动性不够等原因导致市场上的价格和真实价值不一样. 即使某个时刻市场上可能出现短暂的价格和价值不符, 也就是短暂的套利机会, 我们也假设马上就会有人用掉了这个机会从而让产品的价格反应出它真实的价值. 

#### 再次简化: 不考虑无风险利率(No interest free rate)

因为市场上没有套利的机会, 所以我们可以完美复制, 通过购买一定量的股票本身来创造出和期权一样的现金流. 

假设我们购买 $&Delta;$ 个股票, 我们当前拥有的股票资产价值是 $20&Delta;$

三个月后的两种可能:

1. 股票涨到了$22, 股票价值 $22&Delta;$, 期权价值$1

2. 股票跌到了$18, 股票资产价值是 $18&Delta;$, 期权价值$0

这两种情况期权价是 1 - 0, 我们让我们购买的$&Delta;$ 个股票也体现出同样的价差:

$$22&Delta; 18&Delta; = 1 - 0$$

算出$&Delta; = 0.25$ 


#### 考虑无风险利率(interest free rate)

#### 无风险资产组合

### 一阶Binomia模型: 无套利定价(No-arbitrage pricing)公式
